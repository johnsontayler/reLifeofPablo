<html>
	<head>
		<title>reLifeofPablo</title>
		<meta charset="UTF-8">
		<meta name="description" content="An interactive web app to relive The Life of Pablo, Kanye West's greatest concert experience.">
		<meta name="keywords" content="Kanye West, Kanye, Yeezy, TLOP, The Life of Pablo, Three JS, Best Concert, Best Album, JavaScript">
		<meta name="author" content="Tayler Evan Johnson">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="./css/style.css">
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<div id="overlay">
			<div id="info">
				Created by <a href="http://taylerjohnson.com" target="_blank" rel="noopener">Tayler Evan Johnson</a> | music by <a href="https://open.spotify.com/album/7gsWAHLeT0w7es6FofOXk1" target="_blank" rel="noopener">Kanye West</a><br/>
				navigate stage with arrows or mouse | change songs with spacebar
			</div>
			<div>
				<button id="startButton">Click to Resurrect</button>
				<p>THE LIFE OF PABLO</p>
			</div>
		</div>
		<div id="dropdown" style="position: absolute; top: 0; left: 0; color: white;">
			<div class="dropdown-toggle" type="" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				WHICH / ONE
			</div>
			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
				<a class="dropdown-item" href="#">Ultralight Beam</a>
				<a class="dropdown-item" href="#">Father Stretch My Hands, Pt. 1</a>
				<a class="dropdown-item" href="#">Pt. 2</a>
				<a class="dropdown-item" href="#">Famous</a>
				<a class="dropdown-item" href="#">Feedback</a>
				<a class="dropdown-item" href="#">Low Lights</a>
				<a class="dropdown-item" href="#">Highlights</a>
				<a class="dropdown-item" href="#">Freestyle 4</a>
				<a class="dropdown-item" href="#">Waves</a>
				<a class="dropdown-item" href="#">FML</a>
				<a class="dropdown-item" href="#">Real Friends</a>
				<a class="dropdown-item" href="#">Wolves</a>
				<a class="dropdown-item" href="#">Frank's Track</a>
				<a class="dropdown-item" href="#">30 Hours</a>
				<a class="dropdown-item" href="#">No More Parties in LA</a>
				<a class="dropdown-item" href="#">Facts (Charlie Heat Version)</a>
				<a class="dropdown-item" href="#">Fade</a>
				<a class="dropdown-item" href="#">Saint Pablo</a>
			</div>
		</div>
		<script src="js/three.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script>
			var changeButtonText = function () {
				var text = ["Click to Relive", "Click to Rejoice", "Click to Reincarnate", "Click to Recreate", "Click to Resurrect"];

				const startButtonText = document.getElementById("startButton");

				let i = 0;
				setInterval(function() {
							if (startButtonText) {
								startButtonText.innerText = text[i];
								i = i + 1;
								if (i == text.length) {
									i =  0;
								}
							}
				}, 1000);
			};

			var startButton = document.getElementById( 'startButton' );
			startButton.addEventListener( 'click', function () {
				var overlay = document.getElementById( 'overlay' );
				overlay.remove();

				var context = new AudioContext();

				var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
				camera.position.z = 20;
	
				var listener = new THREE.AudioListener();
				camera.add( listener );
	
				var scene = new THREE.Scene();
	
				var geometry = new THREE.BoxGeometry( 10, 1, 15 );
				var cubeMaterials = 
				[
					new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true, side: THREE.DoubleSide } ), // RIGHT SIDE
					new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true, side: THREE.DoubleSide } ), // LEFT SIDE
					new THREE.MeshPhongMaterial( { map: new THREE.TextureLoader( ).load( 'img/2.png' ), side: THREE.FrontSide } ), // TOP SIDE
					new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true, side: THREE.DoubleSide } ), // BOTTOM SIDE
					new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true, side: THREE.DoubleSide } ), // FRONT SIDE
					new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true, side: THREE.DoubleSide } ), // BACK SIDE
				]
				var material = new THREE.MeshFaceMaterial( cubeMaterials );
				var cube = new THREE.Mesh( geometry, material );
				scene.add( cube );
	
				var sound = new THREE.PositionalAudio( listener );
				
				let yzy = 0;
				var changeAudioLoader = function () {
					pabloSong = 
					[
					'audio/1 Ultralight Beam.ogg',
					'audio/2 Father Stretch.ogg',
					'audio/3 Pt. 2.ogg',
					'audio/4 Famous.ogg',
					'audio/5 Feedback.ogg',
					'audio/6 Low Lights.ogg',
					'audio/7 Highlights.ogg',
					'audio/8 Freestyle.ogg',
					'audio/9 Waves.ogg',
					'audio/10 FML.ogg',
					]
					var audioLoader = new THREE.AudioLoader();
					
					audioLoader.load( pabloSong[yzy], function( buffer ) {
						console.log(pabloSong[yzy]);
						sound.setBuffer( buffer );
						sound.setLoop(true);
						sound.setVolume(4.5);
						sound.play()
					});
				};
				
				cube.add( sound );

				document.addEventListener( 'keydown', function (e)
				{
					if(e.keyCode == 32) {
						yzy += 1;
						if (yzy == pabloSong.length) {
							yzy = 0;
						} 
						sound.stop();
						changeAudioLoader();
					}
				});
				
				var renderer = new THREE.WebGLRenderer();
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );
				
				controls = new THREE.OrbitControls( camera, renderer.domElement );
				
				window.addEventListener( 'resize', function ( )
				{
					var width = window.innerWidth;
					var height = window.innerHeight;
					renderer.setSize( width, height );
					camera.aspect = width / height;
					camera.updateProjectionMatrix( );
				});

				var animate = function () {
					requestAnimationFrame( animate );
	
					cube.rotation.x += 0;
					cube.rotation.y += 0;
	
					renderer.render( scene, camera );
				};
	
				animate();
				changeAudioLoader();
			});

			changeButtonText();
		</script>
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	</body>
</html>